# Karachur Bot

## О боте
Karachur Bot — это Telegram-бот для групповых чатов с интеграцией Google Gemini AI. Бот обрабатывает сообщения и файлы, сохраняет контекст переписки и генерирует ответы с помощью нейросети.

## Функциональность

- Ответы на сообщения с триггерным словом "Карачур"
- Обработка контекста предыдущих сообщений
- Поддержка различных типов медиафайлов (изображения, документы, видео, аудио)
- Сохранение истории сообщений в локальной базе данных SQLite

## Установка и настройка

### Предварительные требования
- Python 3.10+
- Telegram Bot Token (получить у [@BotFather](https://t.me/BotFather))
- Google Gemini API Key (получить на [Google AI Studio](https://makersuite.google.com/))

### Шаги по установке

1. **Клонирование репозитория:**
   ```bash
   git clone https://github.com/yourusername/karachur-bot.git
   cd karachur-bot
   ```

2. **Создание и активация виртуального окружения:**

   Windows:
   ```bash
   python -m venv venv
   venv\Scripts\activate
   ```

   Linux/Mac:
   ```bash
   python -m venv venv
   source venv/bin/activate
   ```

3. **Установка зависимостей:**
   ```bash
   pip install -r requirements.txt
   ```
   > Используются следующие зависимости:
   > - python-telegram-bot==21.0.0
   > - google-generativeai==0.5.0
   > - Pillow==10.1.0
   > - python-dotenv==1.0.0

4. **Настройка конфигурации:**
   - Скопируйте файл примера конфигурации:
     ```bash
     cp config.cfg.example config.cfg
     ```
   - Отредактируйте `config.cfg`, добавив ваш Telegram Bot Token и Gemini API Key:
     ```
     [SETTINGS]
     BOT_TOKEN = YOUR_BOT_TOKEN_HERE
     GEMINI_API_KEY = YOUR_GEMINI_API_KEY_HERE
     DB_FILE = messages.db
     MEDIA_DIR = media
     TRIGGER_WORD = Карачур
     ```

5. **Создание директории для медиафайлов:**
   ```bash
   mkdir -p media
   ```

6. **Запуск бота:**
   ```bash
   python bot.py
   ```

## Использование

1. Добавьте бота в групповой чат или напишите ему в личные сообщения.
2. **Важно: для полноценной работы боту необходимо предоставить права администратора в группе.**
3. Для получения ответа от бота, начните сообщение с триггерного слова "Карачур".
4. Бот будет учитывать контекст предыдущих сообщений при генерации ответа.

## Примеры использования

- `Карачур, расскажи анекдот` — бот сгенерирует и расскажет анекдот.
- `Карачур, что ты думаешь о [тема]?` — бот даст свое мнение по указанной теме.
- `Карачур, помоги составить план [мероприятия]` — бот поможет с планированием.

## Структура проекта

```
karachur-bot/
├── bot.py          # Основной файл бота
├── config.cfg      # Файл конфигурации (создается из config.cfg.example)
├── requirements.txt # Зависимости Python
├── media/          # Директория для сохранения медиафайлов
└── README.md       # Документация
```

## Решение проблем

При возникновении ошибок проверьте:
1. Правильность указанных токенов в config.cfg
2. Наличие доступа к интернету
3. Имеет ли бот права администратора в группе
4. Логи бота на наличие специфических ошибок

## Лицензия

Этот проект распространяется под MIT License - смотрите файл [LICENSE](LICENSE) для подробностей.
